<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mohano - Real-time Visualizer for Claude Code Agents</title>
  <meta name="description" content="Watch Claude Code multi-agent sessions in real time. Timeline, task graph, and agent views for debugging and understanding agent behavior.">
  <link rel="stylesheet" href="landing.css">
</head>
<body>

  <!-- Nav -->
  <nav class="landing-nav">
    <a href="/" class="nav-logo">Mohano</a>
    <div class="nav-links">
      <a href="#how-it-works">How it works</a>
      <a href="#features">Features</a>
      <a href="https://github.com/hulryung/mohano" target="_blank" rel="noopener">GitHub</a>
    </div>
  </nav>

  <noscript>
    <div class="noscript-banner">
      JavaScript is required to create workspaces. Please enable JavaScript to continue.
    </div>
  </noscript>

  <!-- Hero -->
  <section class="hero">
    <span class="hero-badge">Open source agent visualizer</span>
    <h1>See your agents <span class="highlight">think</span></h1>
    <p class="hero-subtitle">
      Real-time visualizer for Claude Code multi-agent activity.
      Watch timelines, tasks, and agent interactions as they happen.
    </p>
    <div class="hero-actions">
      <button class="btn-primary" id="btn-create-workspace" onclick="createWorkspace()">
        Create Workspace
      </button>
      <a class="btn-ghost" href="https://github.com/hulryung/mohano" target="_blank" rel="noopener">
        View on GitHub
      </a>
    </div>

    <div class="hero-visual">
      <div class="terminal-bar">
        <span class="terminal-dot"></span>
        <span class="terminal-dot"></span>
        <span class="terminal-dot"></span>
      </div>
      <div class="terminal-content">
        <div><span class="prompt">$</span> <span class="cmd">./setup.sh --url https://your-server.com --api-key TOKEN</span></div>
        <div><span class="output">Configuring Mohano hooks for Claude Code...</span></div>
        <div><span class="success">Done. Start a Claude Code session and open your dashboard.</span></div>
      </div>
    </div>
  </section>

  <!-- How It Works -->
  <section class="section" id="how-it-works">
    <p class="section-label">How it works</p>
    <h2 class="section-title">Three steps to visibility</h2>
    <p class="section-desc">
      Mohano hooks into Claude Code's event system and streams everything to a live dashboard.
    </p>
    <div class="steps">
      <div class="step">
        <div class="step-number">1</div>
        <h3>Create a workspace</h3>
        <p>Click the button above to get your workspace token. Each workspace is an isolated event stream.</p>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <h3>Run the setup script</h3>
        <p>Point your local Claude Code at the server with <code>./setup.sh --url ... --api-key TOKEN</code></p>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <h3>Open your dashboard</h3>
        <p>Watch agents work in real time with timeline, task graph, and agent views.</p>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="section" id="features">
    <p class="section-label">Features</p>
    <h2 class="section-title">Built for multi-agent debugging</h2>
    <p class="section-desc">
      Everything you need to understand what your Claude Code agents are doing.
    </p>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon blue">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h10"/></svg>
        </div>
        <h3>Timeline View</h3>
        <p>Swim-lane timeline with per-agent event streams. See tool calls, subagent spawns, and task updates in chronological order.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon purple">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="8" y="14" width="7" height="7" rx="1"/><path d="M6.5 10v1.5a1 1 0 001 1h2M17.5 10v1.5a1 1 0 01-1 1h-2"/></svg>
        </div>
        <h3>Task Graph</h3>
        <p>Kanban board with dependency arrows. Track tasks across Pending, In Progress, and Completed columns.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon green">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M5 20v-1a7 7 0 0114 0v1"/></svg>
        </div>
        <h3>Agents View</h3>
        <p>Cards for every agent grouped by type: main session, subagents, and team members with live status indicators.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon cyan">
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        </div>
        <h3>Real-time WebSocket</h3>
        <p>Auto-reconnecting WebSocket connection. Events appear instantly with no polling. Works across networks.</p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="landing-footer">
    <div class="footer-content">
      <span>Built for Claude Code</span>
      <span class="footer-sep">/</span>
      <a href="https://github.com/hulryung/mohano" target="_blank" rel="noopener">GitHub</a>
      <span class="footer-sep">/</span>
      <span>MIT License</span>
    </div>
  </footer>

  <!-- Workspace Modal -->
  <div class="modal-overlay hidden" id="workspace-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Workspace Created</h2>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-warning">
          <span class="modal-warning-icon">!</span>
          <span>Save this token! It cannot be recovered.</span>
        </div>

        <div class="modal-field">
          <div class="modal-field-label">Your workspace token</div>
          <div class="modal-field-value">
            <code id="modal-token"></code>
            <button class="btn-copy" onclick="copyField('modal-token', this)">Copy</button>
          </div>
        </div>

        <div class="modal-field">
          <div class="modal-field-label">Dashboard URL</div>
          <div class="modal-field-value">
            <code id="modal-dashboard-url"></code>
            <button class="btn-copy" onclick="copyField('modal-dashboard-url', this)">Copy</button>
          </div>
        </div>

        <div class="modal-field">
          <div class="modal-field-label">Setup command</div>
          <div class="modal-field-value">
            <code id="modal-setup-cmd"></code>
            <button class="btn-copy" onclick="copyField('modal-setup-cmd', this)">Copy</button>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <a class="btn-primary" id="modal-open-dashboard" href="#" target="_blank" rel="noopener">
          Open Dashboard
        </a>
      </div>
    </div>
  </div>

  <script>
    function getBaseUrl() {
      return window.location.origin;
    }

    async function createWorkspace() {
      var btn = document.getElementById('btn-create-workspace');
      var originalText = btn.innerHTML;
      btn.disabled = true;
      btn.innerHTML = '<span class="spinner"></span> Creating...';

      try {
        var resp = await fetch('/api/workspaces', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        });

        if (!resp.ok) {
          var errData = await resp.json().catch(function() { return {}; });
          throw new Error(errData.error || 'Failed to create workspace (HTTP ' + resp.status + ')');
        }

        var data = await resp.json();
        var token = data.token || data.api_key;
        var baseUrl = getBaseUrl();
        var dashboardPath = '/d/' + token;
        var dashboardUrl = baseUrl + dashboardPath;
        var setupCmd = './setup.sh --url ' + baseUrl + ' --api-key ' + token;

        document.getElementById('modal-token').textContent = token;
        document.getElementById('modal-dashboard-url').textContent = dashboardUrl;
        document.getElementById('modal-setup-cmd').textContent = setupCmd;
        document.getElementById('modal-open-dashboard').href = dashboardPath;

        document.getElementById('workspace-modal').classList.remove('hidden');
      } catch (err) {
        alert('Error: ' + err.message);
      } finally {
        btn.disabled = false;
        btn.innerHTML = originalText;
      }
    }

    function closeModal() {
      document.getElementById('workspace-modal').classList.add('hidden');
    }

    function copyField(elementId, btn) {
      var text = document.getElementById(elementId).textContent;
      navigator.clipboard.writeText(text).then(function() {
        var prev = btn.textContent;
        btn.textContent = 'Copied';
        btn.classList.add('copied');
        setTimeout(function() {
          btn.textContent = prev;
          btn.classList.remove('copied');
        }, 1500);
      });
    }

    // Close modal on overlay click
    document.getElementById('workspace-modal').addEventListener('click', function(e) {
      if (e.target === this) closeModal();
    });

    // Close modal on Escape
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') closeModal();
    });
  </script>

</body>
</html>
